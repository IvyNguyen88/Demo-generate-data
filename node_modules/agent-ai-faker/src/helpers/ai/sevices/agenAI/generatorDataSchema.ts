import { CohereClient } from 'cohere-ai';

const cohere = new CohereClient({
    token: 'YGRYAxxeTpWW4OBBdthd3s8EKEtd1j6WVWQwDv7J',
});

interface Schema {
    [key: string]: string; // Field name to data type mapping
}

export async function generateFakeData(
    requirement: string,
    schema: Schema,
    format: 'json' | 'csv' = 'json',
    count: number = 1
): Promise<string> {
    const prompt = promptTemplate(requirement, schema, format);

    try {
        const response = await cohere.generate({
            model: 'command-nightly', // Use the appropriate model
            prompt,
            maxTokens: 1000, // Adjust based on the size of the output
            temperature: 0.3, // Lower temperature for more deterministic output
        });
        return response.generations[0].text.trim();
    } catch (error) {
        console.error('Error generating fake data:', error);
        throw error;
    }
}
